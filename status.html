<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Status Design Test</title>
    <link rel="stylesheet" href="css/status.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  </head>
  <body>
    <!-- Name Input Modal (shown for new players) -->
    <div id="name-input-modal" class="modal hidden">
        <div class="modal-content">
            <h2>ðŸŽ® GATE OF AWAKENING</h2>
            <p>Enter the realm of the Shadow Monarch</p>
            <form id="name-form">
                <div class="input-container">
                    <input 
                        type="text" 
                        id="player-name-input" 
                        placeholder="Enter your hunter name..." 
                        maxlength="20" 
                        required
                        autocomplete="off"
                    >
                </div>
                <button type="submit" class="portal-button">CROSS THE GATE</button>
            </form>
        </div>
    </div>

    <div class="quest-box" id="quest-box">
              <div class="quest-header">
          <span>STATUS</span>
          <div class="header-buttons">
            <button id="player-details-btn" class="icon-btn" aria-label="Player Details" title="Player Details">
              <i class="fas fa-user"></i>
            </button>
            <button id="active-quests-btn" class="icon-btn" aria-label="Active Quests" title="Active Quests">
              <i class="fas fa-list-check"></i>
            </button>
          </div>
          <button id="logout-btn" class="icon-btn" aria-label="Logout" title="Logout">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <line x1="12" y1="2" x2="12" y2="12"></line>
                <path d="M18.36 6.64a9 9 0 1 1-12.73 0"></path>
            </svg>
          </button>
        </div>
      <div class="status-level-block">
        <div class="level-left">
          <div class="level-number" id="level-number">1</div>
          <div class="level-label">LEVEL</div>
        </div>
        <div class="level-right">
          <div class="level-meta-line"><span class="meta-label">JOB:</span> <span id="name-text">None</span></div>
          <div class="level-meta-line"><span class="meta-label">TITLE:</span> <span id="title-text">None</span></div>
        </div>
      </div>

      <!-- Resources Panel: HP, MP, FATIGUE -->
      <div class="resources-panel">
        <div class="resource-block hp">
          <div class="resource-left">
            <i class="resource-icon fas fa-plus"></i>
            <div class="resource-label">HP</div>
          </div>
          <div class="resource-main">
            <div class="stat-bar-container">
              <div class="stat-bar-inner">
                <div id="hp-fill" class="stat-bar-fill" style="width: 100%"></div>
              </div>
              <span class="stat-value" id="hp-value"><span class="value-major">100</span>/<span class="value-max">100</span></span>
            </div>
          </div>
        </div>

        <div class="resource-block mp">
          <div class="resource-left">
            <i class="resource-icon fas fa-flask"></i>
            <div class="resource-label">MP</div>
          </div>
          <div class="resource-main">
            <div class="stat-bar-container">
              <div class="stat-bar-inner">
                <div id="mp-fill" class="stat-bar-fill" style="width: 100%"></div>
              </div>
              <span class="stat-value" id="mp-value"><span class="value-major">100</span>/<span class="value-max">100</span></span>
            </div>
          </div>
        </div>

        <div class="resource-block fatigue">
          <svg class="fatigue-ring" viewBox="0 0 36 36" aria-hidden="true">
            <circle class="ring-bg" cx="18" cy="18" r="16" />
            <circle class="ring-progress" cx="18" cy="18" r="16" />
          </svg>
          <div class="fatigue-text"><span class="fatigue-label">FATIGUE:</span> <span class="value-major" id="fatigue-value">0</span></div>
        </div>

        <div class="resource-block stm">
          <div class="resource-left">
            <i class="resource-icon fas fa-bolt"></i>
            <div class="resource-label">STM</div>
          </div>
          <div class="resource-main">
            <div class="stat-bar-container">
              <div class="stat-bar-inner">
                <div id="stm-fill" class="stat-bar-fill" style="width: 100%"></div>
              </div>
              <span class="stat-value" id="stm-value"><span class="value-major">100</span>/<span class="value-max">100</span></span>
            </div>
          </div>
        </div>

        <div class="resource-block exp">
          <div class="resource-left">
            <i class="resource-icon fas fa-star"></i>
            <div class="resource-label">EXP</div>
          </div>
          <div class="resource-main">
            <div class="stat-bar-container">
              <div class="stat-bar-inner">
                <div id="exp-fill" class="stat-bar-fill" style="width: 100%"></div>
              </div>
              <span class="stat-value" id="exp-value"><span class="value-major">0</span>/<span class="value-max">100</span></span>
            </div>
          </div>
        </div>
      </div>

      <!-- Attributes Panel -->
      <div class="attributes-panel">
        <div class="attributes-grid">
          <div class="attribute-item"><i class="attr-icon fas fa-dumbbell"></i><span>STR:</span><span id="str-value">0</span></div>
          <div class="attribute-item"><i class="attr-icon fas fa-heart"></i><span>VIT:</span><span id="vit-value">0</span></div>
          <div class="attribute-item"><i class="attr-icon fas fa-person-running"></i><span>AGI:</span><span id="agi-value">0</span></div>
          <div class="attribute-item"><i class="attr-icon fas fa-brain"></i><span>INT:</span><span id="int-value">0</span></div>
          <div class="attribute-item"><i class="attr-icon fas fa-satellite-dish"></i><span>PER:</span><span id="per-value">0</span></div>
          <div class="attribute-item"><i class="attr-icon fas fa-lightbulb"></i><span>WIS:</span><span id="wis-value">0</span></div>
        </div>
        
              </div>
      </div>

      <!-- Player Details Modal -->
      <div id="player-details-modal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closePlayerDetails()">&times;</span>
          <h2>CHARACTER DETAILS</h2>
          <div class="player-details-content">
            <div class="detail-item"><strong>JOB:</strong> <span id="modal-job-text">None</span></div>
            <div class="detail-item"><strong>TITLE:</strong> <span id="modal-title-text">None</span></div>
            <div class="detail-item"><strong>NAME:</strong> <span id="modal-name-text">None</span></div>
            <div class="detail-item"><strong>GUILD:</strong> <span id="modal-guild-text">None</span></div>
            <div class="detail-item"><strong>RACE:</strong> <span id="modal-race-text">None</span></div>
            <div class="detail-item"><strong>REGION:</strong> <span id="modal-region-text">None</span></div>
            <div class="detail-item"><strong>LOCATION:</strong> <span id="modal-location-text">None</span></div>
            <div class="detail-item"><strong>PING:</strong> <span id="modal-ping-text">0 ms</span></div>
          </div>
        </div>
      </div>

      <!-- Active Quests Modal -->
      <div id="active-quests-modal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeActiveQuests()">&times;</span>
          <h2>ACTIVE QUESTS</h2>
          <div class="quests-content">
            <div class="quest-item">
              <div class="quest-info">
                <span class="quest-type">Grunt Work</span>
                <span class="quest-level">Lv.1</span>
              </div>
            </div>
            <div class="quest-item">
              <div class="quest-info">
                <span class="quest-type">[MAIN] Power</span>
                <span class="quest-level">Lv.1</span>
              </div>
            </div>
            <div class="quest-item">
              <div class="quest-info">
                <span class="quest-type">[SIDE] New World</span>
                <span class="quest-level">Lv.5</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Hidden Elements from Main Status Page (for JavaScript compatibility) -->
      <div id="status-content" style="display: none;">
        <!-- Status Header -->
        <div class="status-header">
            <h1>STATUS</h1>
            <div class="header-controls">
                <button id="export-btn">EXPORT</button>
                <button id="import-btn">IMPORT</button>
                <button id="daily-reset-btn">RESET</button>
            </div>
        </div>
       

      <!-- Loading Ring -->
      <div id="loading-ring" class="loading-container" style="display: none;">
          <div class="loading-spinner"></div>
          <div class="loading-text">Loading...</div>
      </div>

      <!-- Import Modal -->
      <div id="import-modal" class="modal hidden">
          <div class="modal-content">
              <h3>Import Data</h3>
              <textarea id="import-textarea" placeholder="Paste your exported data here..."></textarea>
              <div class="modal-buttons">
                  <button id="confirm-import">Import</button>
                  <button id="cancel-import">Cancel</button>
              </div>
          </div>
      </div>

      <!-- File Input for Import -->
      <input type="file" id="file-input" accept=".json" style="display: none;">

      <script>
        // Player Details Modal Functions
        function openPlayerDetails() {
          document.getElementById('player-details-modal').style.display = 'block';
        }

        function closePlayerDetails() {
          document.getElementById('player-details-modal').style.display = 'none';
        }

        // Active Quests Modal Functions
        function openActiveQuests() {
          document.getElementById('active-quests-modal').style.display = 'block';
        }

        function closeActiveQuests() {
          document.getElementById('active-quests-modal').style.display = 'none';
        }

        // Event Listeners
        document.getElementById('player-details-btn').addEventListener('click', openPlayerDetails);
        document.getElementById('active-quests-btn').addEventListener('click', openActiveQuests);

        // Close modals when clicking outside
        window.onclick = function(event) {
          const playerModal = document.getElementById('player-details-modal');
          const questsModal = document.getElementById('active-quests-modal');
          if (event.target === playerModal) {
            closePlayerDetails();
          }
          if (event.target === questsModal) {
            closeActiveQuests();
          }
        }
      </script>

      <!-- Scripts -->
      <script src="js/user-manager.js"></script>
      <script src="js/status.js"></script>
      
      <!-- Service Worker Registration -->
      <script>
          if ('serviceWorker' in navigator) {
              navigator.serviceWorker.register('sw.js')
                  .then(registration => {
                      console.log('SW registered:', registration);
                  })
                  .catch(error => {
                      console.log('SW registration failed:', error);
                  });
          }
      </script>
    </body>
  </html>


